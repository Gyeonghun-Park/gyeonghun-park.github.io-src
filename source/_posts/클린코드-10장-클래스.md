---
title: "[Clean Code]í´ë¦°ì½”ë“œ 10ì¥ í´ë˜ìŠ¤"
tags: [Book]
toc: true
widgets:
  - type: toc
    position: left
  - type: categories
    position: right
cover: /img/clean_code.jpeg
date: 2022-02-08 13:16:36
categories: [Book]
---

</pre>
<!--more-->

<!--more-->

## **10ì¥ í´ë˜ìŠ¤**

ğŸ”– `ì½ì€ ë²”ìœ„` : 9ì¥, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ~ 10ì¥, í´ë˜ìŠ¤

---

### **1. ìº¡ìŠí™” ë˜ì–´ì•¼ í•œë‹¤**

- í´ë˜ìŠ¤ë¥¼ ê°œë°œí•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ êµ¬í˜„ì„ ê°ì¶”ê³ , ì™¸ë¶€ ê°ì²´ì™€ ìƒí˜¸ì‘ìš© í•˜ëŠ” ë¶€ë¶„ë§Œ ë…¸ì¶œí•œë‹¤.
- ì™¸ë¶€ì˜ ì˜ëª»ëœ ì‚¬ìš©ì„ ë°©ì§€í•œë‹¤.
- ê²½ê³„ì—ì„œ ë°°ì› ë˜ ë¶€ë¶„(Map)

![Encapsulation](/img/í´ë¦°ì½”ë“œ-10ì¥-í´ë˜ìŠ¤/1.png?style=centerme)

---

### **2. ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)**

`í´ë˜ìŠ¤ëŠ” ì‘ì•„ì•¼ í•œë‹¤.`

- í•¨ìˆ˜ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í´ë˜ìŠ¤ë„ ì‘ì•„ì•¼ í•œë‹¤.
- í•¨ìˆ˜ëŠ” ë¼ì¸ ìˆ˜ë¡œ í¬ê¸°ë¥¼ ì¸¡ì •í–ˆëŠ”ë°, í´ë˜ìŠ¤ëŠ” ë§¡ì€ ì±…ì„ì˜ ìˆ˜ë¡œ í¬ê¸°ë¥¼ ì¸¡ì •í•œë‹¤.
- í´ë˜ìŠ¤ ì„¤ëª…ì€ ë§Œì¼(if), ê·¸ë¦¬ê³ (and), í•˜ë©°(or), í•˜ì§€ë§Œ(but)ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  25ë‹¨ì–´ ë‚´ì™¸ë¡œ ê°€ëŠ¥í•´ì•¼ í•œë‹¤. -> ì±…ì„ì´ í•œê°€ì§€ ì´ì–´ì•¼ í•œë‹¤.
- ì‘ì€ í´ë˜ìŠ¤ê°€ ë§ì€ ì‹œìŠ¤í…œì´ë“  í° í´ë˜ìŠ¤ê°€ ëª‡ ê°œ ë¿ì´ ì‹œìŠ¤í…œì´ë“  ëŒì•„ê°€ëŠ” í‘¸í’ˆì€ ê·¸ ìˆ˜ê°€ ë¹„ìŠ·í•˜ë‹¤.
- í¼ì§í•œ ë‹¤ëª©ì  í´ë˜ìŠ¤ ëª‡ ê°œë¡œ ì´ë¤„ì§„ ì‹œìŠ¤í…œì€ (ë³€ê²½ì„ ê°€í•  ë•Œ) ë‹¹ì¥ ì•Œ í•„ìš”ê°€ ì—†ëŠ” ì‚¬ì‹¤ê¹Œì§€ ë“¤ì´ë°€ì–´ ë…ìë¥¼ ë°©í•´í•œë‹¤.
- ì‘ì€ í´ë˜ìŠ¤ëŠ” ê°ì ë§¡ì€ ì±…ì„ì´ í•˜ë‚˜ë©°, ë³€ê²½í•  ì´ìœ ê°€ í•˜ë‚˜ë©°, ë‹¤ë¥¸ ì‘ì€ í´ë˜ìŠ¤ì™€ í˜‘ë ¥í•´ ì‹œìŠ¤í…œì— í•„ìš”í•œ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.

ë‚˜ìœ ì˜ˆ

```java
public class SuperDashboard extends JFrame implements MetaDataUser {
    public Component getLastFocusedComponent()
    public void setLastFocused(Component lastFocused)
    public int getMajorVersionNumber()
    public int getMinorVersionNumber()
    public int getBuildNumber()
}
```

- focuse, version ë‘ê°€ì§€ ì±…ì„ì´ ë³´ì¸ë‹¤.

ì¢‹ì€ ì˜ˆ

```java
public Version {
    public int getMajorVersionNumber()
    public int getMinorVersionNumber()
    public int getBuildNumber()
}
```

- ë‹¤ë¥¸ ê³³ì—ì„œë„ ì¬í™œìš© í•  ìˆ˜ ìˆë‹¤.

---

### **3. ë‚®ì€ ê²°í•©ë„, ë†’ì€ ì‘ì§‘ë„**

- ê²°í•©ë„ë€ ë‹¤ë¥¸ ëª¨ë“ˆê°„ì˜ ì˜ì¡´ë„ë¥¼ ë§í•œë‹¤.
- ì‘ì§‘ë„ë€ ëª¨ë“ˆ ë‚´ë¶€ì˜ ê¸°ëŠ¥ ì§‘ì¤‘ë„ë¥¼ ë§í•œë‹¤.
- ê²°í•©ë„ëŠ” ë‚®ì„ ìˆ˜ë¡, ì‘ì§‘ë„ëŠ” ë†’ì„ ìˆ˜ë¡ ìœ ì§€ë³´ìˆ˜ì„±ì´ ì¢‹ë‹¤.

![Coupling](/img/í´ë¦°ì½”ë“œ-10ì¥-í´ë˜ìŠ¤/1.png?style=centerme)

#### `1) ë¬¸ì œì `

- ê²°í•©ë„ê°€ ë†’ì€ í´ë˜ìŠ¤ì˜ ë¬¸ì œì 
  - ì—°ê´€ëœ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë©´ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤.
  - ê²°í•©ë„ê°€ ë†’ìœ¼ë©´ ì—°ê´€ëœ í´ë˜ìŠ¤ë“¤ì„ ëª¨ë‘ ì´í•´í•´ì•¼ í•œë‹¤.
- ì‘ì§‘ë„ê°€ ë‚®ì€ í´ë˜ìŠ¤ì˜ ë¬¸ì œì 
  - ì—¬ëŸ¬ ê¸°ëŠ¥ì´ ìˆìœ¼ë¯€ë¡œ ì´í•´í•˜ê¸° ì–´ë µë‹¤
  - ì¬ì‚¬ìš©í•˜ê¸° ì–´ë µë‹¤.

#### `2) ë‚®ì€ ê²°í•©ë„`

- ì‹œìŠ¤í…œì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ë©´ ìœ ì—°ì„±ê³¼ ì¬ì‚¬ìš©ì„±ë„ ë”ìš± ë†’ì•„ì§„ë‹¤.
- DIP : í´ë˜ìŠ¤ê°€ ìƒì„¸í•œ êµ¬í˜„ì´ ì•„ë‹ˆë¼ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼í•œë‹¤.
- ì¶”ìƒí™”ë¥¼ ì´ìš©í•˜ë©´ í…ŒìŠ¤íŠ¸ì½”ë“œ ì§œê¸°ì— ìš©ì´í•˜ë‹¤.

ë‚˜ìœ ì˜ˆ

```java
public class TokyoStockExchange {
  public Money currentPrice(String symbol);
}

public Portfolio {
  private TokyoStockExchange tokyoStockExchange;
  public Portfolio(TokyoStockExchange exchange) {
    this.tokyoStockExchange = tokyoStockExchange;
  }
}
```

- TokyoStockExchange í•¨ìˆ˜ì˜ APIê°€ 5ë¶„ë§ˆë‹¤ ê°’ì´ ë‹¬ë¼ì§€ëŠ” ìƒí™©ì´ë‹¤.
- Portfolio í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§œê¸° ì–´ë µë‹¤.

ì¢‹ì€ ì˜ˆ

```java
public interface StockExchange {
  Money currentPrice(String symbol);
}

public class TokyoStockExchange implements StockExchange {
  public Money currentPrice(String symbol) {
    // call API ...
  }
}

public Portfolio {
  private stockExchange exchange;
  public Portfolio(StockExchange exchange) {
    this.exchange = exchange;
  }
}
```

- StockExchange ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ Portfolioì™€ tokyoStockExchangeì˜ ê²°í•©ë„ë¥¼ ëŠì–´ì¤€ë‹¤.

í…ŒìŠ¤íŠ¸ ì½”ë“œ

```java
public class PortfolioTest {
  private FixedStockExchangeStub exchange;
  private Portfolio portfolio;

  @Before
  protected void setUp() throws Exception {
    exchange = new FixedStockExchangeStub();
    exchange.fix("MSFT", 100);
    portfolio = new Portfolio(exchange);
  }

  @Test
  public void GivenFiveMSFTTotalShouldBe500() throws Exception {
    portfolio.add(5, "MSFT");
    AssertEquals(500, portfolio.value());
  }
}
```

- ê°ì²´ë¥¼ Mockkingí•˜ë©´ ë³€ê²½ë˜ëŠ” í´ë˜ìŠ¤ë„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.
- í™•ì¥ë  ê°€ëŠ¥ì„±ì´ ì ë‹¤ë©´ ì¼ë‹¨ ê²°í•©í•˜ê³ , ë‚˜ì¤‘ì— ì¶”ìƒí™”í•´ë„ ì¢‹ë‹¤.

#### `3) ë†’ì€ ì‘ì§‘ë„`

- í´ë˜ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ìˆ˜ê°€ ì ì–´ì•¼ í•œë‹¤.
- ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ì´ìƒ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ë©”ì„œë“œê°€ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ë§ì´ ì‚¬ìš©í• ìˆ˜ë¡ ì‘ì§‘ë„ê°€ ë†’ë‹¤
- ì‘ì§‘ë„ê°€ ë†’ë‹¤ = í´ë˜ìŠ¤ì— ì†í•œ ë©”ì„œë“œì™€ ë³€ìˆ˜ê°€ ì„œë¡œ ì˜ì¡´í•˜ë©° ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ë¡œ ë¬¶ì¸ë‹¤ = ì„œë¡œ ê´€ê³„ìˆëŠ” ì• ë“¤ë§Œ ëª¨ì—¬ìˆë‹¤.
- í´ë˜ìŠ¤ê°€ ì‘ì§‘ë„ë¥¼ ìƒì–´ê°„ë‹¤ë©´ í•¨ìˆ˜ë¥¼ ìª¼ê°œì•¼í•œë‹¤.

ì¢‹ì€ ì˜ˆ

```java
public class Stack {
    private int topOfStack = 0;
    List<Integer> elements = new LinkedList<Integer>();

    public int size() {
        return topOfStack;
    }

    public void push(int element) {
        topOfStack++;
        elements.add(element);
    }

    public int pop() throws PoppedWhenEmpty {
        if (topOfStack == 0)
            throw new PoppedWhenEmpty();
        int element = elements.get(--topOfStack);
        elements.remove(topOfStack);
        return element;
    }
}
```

---

### **4. ë³€ê²½í•˜ê¸° ì‰¬ì›Œì•¼ í•œë‹¤**

ë‚˜ìœ ì˜ˆ

```java
public class Sql {
    public Sql(String table, Column[] columns)
    public String create()
    public String insert(Object[] fields)
    public String selectAll()
    public String findByKey(String keyColumn, String keyValue)
    public String select(Column column, String pattern)
    public String select(Criteria criteria)
    public String preparedInsert()
    private String columnList(Column[] columns)
    private String valuesList(Object[] fields, final Column[] columns)
    private String selectWithCriteria(String criteria)
    private String placeholderList(Column[] columns)
}
```

- ìƒˆë¡œìš´ SQLì„ ì¶”ê°€í•  ë•Œë„ ìˆ˜ì •ì´ ë°œìƒí•˜ê³ , ê¸°ì¡´ SQlë¬¸ì„ ìˆ˜ì •í•  ë•Œë„ ìˆ˜ì •ì´ ë°œìƒí•˜ë¯€ë¡œ OCPê°€ ìœ„ë°˜ëœë‹¤.

ì¢‹ì€ ì˜ˆ

```java
    abstract public class Sql {
        public Sql(String table, Column[] columns)
        abstract public String generate();
    }

    public class CreateSql extends Sql {
        public CreateSql(String table, Column[] columns)
        @Override public String generate()
    }

    public class SelectSql extends Sql {
        public SelectSql(String table, Column[] columns)
        @Override public String generate()
    }

    public class InsertSql extends Sql {
        public InsertSql(String table, Column[] columns, Object[] fields)
        @Override public String generate()
        private String valuesList(Object[] fields, final Column[] columns)
    }

    public class SelectWithCriteriaSql extends Sql {
        public SelectWithCriteriaSql(
        String table, Column[] columns, Criteria criteria)
        @Override public String generate()
    }

    public class SelectWithMatchSql extends Sql {
        public SelectWithMatchSql(String table, Column[] columns, Column column, String pattern)
        @Override public String generate()
    }

    public class FindByKeySql extends Sql public FindByKeySql(
        String table, Column[] columns, String keyColumn, String keyValue)
        @Override public String generate()
    }

    public class PreparedInsertSql extends Sql {
        public PreparedInsertSql(String table, Column[] columns)
        @Override public String generate() {
        private String placeholderList(Column[] columns)
    }

    public class Where {
        public Where(String criteria) public String generate()
    }

    public class ColumnList {
        public ColumnList(Column[] columns) public String generate()
    }

```

- ê³µê°œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì „ë¶€ SQL í´ë˜ìŠ¤ì—ì„œ íŒŒìƒí•˜ëŠ” í´ë˜ìŠ¤ë¡œ ë§Œë“¤ê³ , ë¹„ê³µê°œ ë©”ì„œë“œëŠ” í•´ë‹¹ í´ë˜ìŠ¤ë¡œ ì˜®ê¸°ê³ , ê³µí†µëœ ì¸í„°í˜ì´ìŠ¤ëŠ” ë”°ë¡œ í´ë˜ìŠ¤ë¡œ ëºë‹¤.
- ê¸°ì¡´ì˜ í´ë˜ìŠ¤ë¥¼ ê±´ë“œë¦¬ì§€ ì•Šì•„ë„ ëœë‹¤.
