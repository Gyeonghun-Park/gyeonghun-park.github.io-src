<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[Clean Code]클린코드 9장 단위 테스트 - Gyeonghun&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="rgb(25,55,71)"><meta name="application-name" content="Gyeonghun&#039;s Blog"><meta name="msapplication-TileImage" content="/img/logo.png"><meta name="msapplication-TileColor" content="rgb(25,55,71)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Gyeonghun&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content=""><meta property="og:type" content="blog"><meta property="og:title" content="[Clean Code]클린코드 9장 단위 테스트"><meta property="og:url" content="https://gyeonghun-park.github.io/2022/02/07/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-9%EC%9E%A5-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/"><meta property="og:site_name" content="Gyeonghun&#039;s blog"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://gyeonghun-park.github.io/img/clean_code.jpeg"><meta property="article:published_time" content="2022-02-07T04:44:00.000Z"><meta property="article:modified_time" content="2022-02-08T05:57:36.663Z"><meta property="article:author" content="Gyeonghun Park"><meta property="article:tag" content="Book"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/clean_code.jpeg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://gyeonghun-park.github.io/2022/02/07/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-9%EC%9E%A5-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/"},"headline":"[Clean Code]클린코드 9장 단위 테스트","image":[],"datePublished":"2022-02-07T04:44:00.000Z","dateModified":"2022-02-08T05:57:36.663Z","author":{"@type":"Person","name":"Gyeonghun Park"},"publisher":{"@type":"Organization","name":"Gyeonghun's blog","logo":{"@type":"ImageObject","url":"https://gyeonghun-park.github.io/img/logo.png"}},"description":""}</script><link rel="canonical" href="https://gyeonghun-park.github.io/2022/02/07/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-9%EC%9E%A5-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/"><link rel="icon" href="/img/logo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Gyeonghun&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><button class="navbar-item" type="button" id="toggleTheme">hi</button><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/clean_code.jpeg" alt="[Clean Code]클린코드 9장 단위 테스트"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-07T04:44:00.000Z" title="2/7/2022, 1:44:00 PM">2022-02-07</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-08T05:57:36.663Z" title="2/8/2022, 2:57:36 PM">2022-02-08</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Book/">Book</a></span><span class="level-item">4분안에 읽기 (약 671 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">[Clean Code]클린코드 9장 단위 테스트</h1><div class="content"><p></pre></p>
<span id="more"></span>

<!--more-->

<h2 id="9장-단위-테스트"><a href="#9장-단위-테스트" class="headerlink" title="9장 단위 테스트"></a><strong>9장 단위 테스트</strong></h2><p>🔖 <code>읽은 범위</code> : 8장, 경계 ~ 9장, 단위 테스트</p>
<hr>
<h3 id="1-테스트-코드의-중요성"><a href="#1-테스트-코드의-중요성" class="headerlink" title="1. 테스트 코드의 중요성"></a><strong>1. 테스트 코드의 중요성</strong></h3><ul>
<li>테스트 코드는 실수를 바로잡아준다.</li>
<li>테스트 코드는 반드시 존재해야 하며, 실제 코드 못지 않게 중요하다.</li>
<li>테스트 케이스는 변경이 쉽도록 한다. 코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위테스트다. 테스트 케이스가 있으면 변경이 두렵지 않다. 테스트 케이스가 없다면 모든 변경이 잠정적인 버그다. 테스트 커버리지가 높을수록 버그에 대한 공포가 줄어든다.</li>
<li>지저분한 테스트 코드는 테스트를 안하니만 못하다.</li>
</ul>
<hr>
<h3 id="2-테스트의-종류"><a href="#2-테스트의-종류" class="headerlink" title="2. 테스트의 종류"></a><strong>2. 테스트의 종류</strong></h3><p>구글의 제안 : 70% unit tests, 20% integratoin tests, 10% end-to-end tests</p>
<p><img src="/img/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-9%EC%9E%A5-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/2.png?style=centerme" alt="Testing pyramid"></p>
<h4 id="1-Unit-Test"><a href="#1-Unit-Test" class="headerlink" title="1) Unit Test"></a><code>1) Unit Test</code></h4><ul>
<li>프로그램 내부의 개별 컴포넌트의 동작을 테스트한다.</li>
<li>배포하기 전에 자동으로 실행되도록 많이 사용한다.</li>
</ul>
<h4 id="2-Integration-Test"><a href="#2-Integration-Test" class="headerlink" title="2) Integration Test"></a><code>2) Integration Test</code></h4><ul>
<li>프로그램 내부의 개별 컴포넌트들을 합쳐서 동작을 테스트한다.</li>
<li>Unit Test는 각 컴포넌트를 고립시켜 테스트하기 때문에 컴포넌트의 interaction을 확인하는 integration Test가 필요하다.</li>
</ul>
<h4 id="3-E2E-Test"><a href="#3-E2E-Test" class="headerlink" title="3) E2E Test"></a><code>3) E2E Test</code></h4><ul>
<li>End to End test</li>
<li>실제 유저의 시나리오대로 네트워크를 통해 서버의 Endpoint를 호출해 테스트한다.</li>
</ul>
<hr>
<h3 id="3-Unit-Test-작성"><a href="#3-Unit-Test-작성" class="headerlink" title="3. Unit Test 작성"></a><strong>3. Unit Test 작성</strong></h3><h4 id="1-테스트-라이브러리를-사용하자"><a href="#1-테스트-라이브러리를-사용하자" class="headerlink" title="1) 테스트 라이브러리를 사용하자"></a><code>1) 테스트 라이브러리를 사용하자</code></h4><ul>
<li>Unit : for unit test, 많이 사용</li>
<li>ockito : for mocking dependencies, 많이 사용</li>
<li>iremock : for stubbing out external services</li>
<li>ack : for writing CDC tests</li>
<li>elenium : for writing UI-driven end-to-end tests</li>
<li>EST-assured : for writing REST API-driven end-to-end tests</li>
</ul>
<h4 id="2-Test-Double"><a href="#2-Test-Double" class="headerlink" title="2) Test Double"></a><code>2) Test Double</code></h4><ol>
<li>Stub</li>
</ol>
<ul>
<li>원래의 구현을 단순한 것으로 대체한다.</li>
<li>테스트를 위해 프로그래밍된 항목에만 응답한다.</li>
</ul>
<ol start="2">
<li>Spy</li>
</ol>
<ul>
<li>Stub의 역할을 하면서 호출에 대한 정보를 기록한다.</li>
<li>이메일 서비스에서 메시지가 몇 번 전송되었는지 확인할 때</li>
</ul>
<ol start="3">
<li>Mock</li>
</ol>
<ul>
<li>행위를 검증하기 위해 가짜 객체를 만들어 테스트하는 방법</li>
<li>호출에 대한 동작을 프로그래밍 할 수 있다.</li>
<li>Stub은 상태를 검증하고 Mock을 행위를 검증한다.</li>
</ul>
<h4 id="3-given-when-then-패턴을-사용하자"><a href="#3-given-when-then-패턴을-사용하자" class="headerlink" title="3) given-when-then 패턴을 사용하자"></a><code>3) given-when-then 패턴을 사용하자</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">testGetPageHierarchyAsxml</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  givenPages(<span class="string">&quot;PageOne&quot;</span>, <span class="string">&quot;PageOne.ChildOne&quot;</span>, <span class="string">&quot;PageTwo&quot;</span>);</span><br><span class="line"></span><br><span class="line">  whenRequestIsIssued(<span class="string">&quot;root&quot;</span>, <span class="string">&quot;type:pages&quot;</span>);</span><br><span class="line"></span><br><span class="line">  thenResponseShouldBeXML();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetPageHierarchyHasRightTags</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  givenPages(<span class="string">&quot;PageOne&quot;</span>, <span class="string">&quot;PageOne.ChildOne&quot;</span>, <span class="string">&quot;PageTwo&quot;</span>);</span><br><span class="line"></span><br><span class="line">  whenRequestIsIssued(<span class="string">&quot;root&quot;</span>, <span class="string">&quot;type:pages&quot;</span>);</span><br><span class="line"></span><br><span class="line">  thenResponseShouldContain(<span class="string">&quot;&lt;name&gt;PageOne&lt;/name&gt;&quot;</span>, <span class="string">&quot;&lt;name&gt;ChildOne&lt;/name&gt;&quot;</span>, <span class="string">&quot;&lt;name&gt;PageTwo&lt;/name&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>given : 테스트에 대한 pre-condition</li>
<li>when : 테스트하고 싶은 동작 호출</li>
<li>then : 테스트 결과 확인</li>
</ul>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Book/">Book</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6165b42386572e0012d91e36&amp;product=inline-share-buttons" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/02/08/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-10%EC%9E%A5-%ED%81%B4%EB%9E%98%EC%8A%A4/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[Clean Code]클린코드 10장 클래스</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/02/06/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-8%EC%9E%A5-%EA%B2%BD%EA%B3%84/"><span class="level-item">[Clean Code]클린코드 8장 경계</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">댓글</h3><script src="https://utteranc.es/client.js" repo="Gyeonghun-Park/utterances" issue-term="pathname" label="Comment" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#9장-단위-테스트"><span class="level-left"><span class="level-item">1</span><span class="level-item">9장 단위 테스트</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-테스트-코드의-중요성"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">1. 테스트 코드의 중요성</span></span></a></li><li><a class="level is-mobile" href="#2-테스트의-종류"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">2. 테스트의 종류</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-Unit-Test"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">1) Unit Test</span></span></a></li><li><a class="level is-mobile" href="#2-Integration-Test"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">2) Integration Test</span></span></a></li><li><a class="level is-mobile" href="#3-E2E-Test"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">3) E2E Test</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-Unit-Test-작성"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">3. Unit Test 작성</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-테스트-라이브러리를-사용하자"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">1) 테스트 라이브러리를 사용하자</span></span></a></li><li><a class="level is-mobile" href="#2-Test-Double"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">2) Test Double</span></span></a></li><li><a class="level is-mobile" href="#3-given-when-then-패턴을-사용하자"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">3) given-when-then 패턴을 사용하자</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Blockchain/"><span class="level-start"><span class="level-item">Blockchain</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Coding-Interview/"><span class="level-start"><span class="level-item">Coding Interview</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Coding-Interview/String-Manipulation/"><span class="level-start"><span class="level-item">String Manipulation</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Solidity/"><span class="level-start"><span class="level-item">Solidity</span></span><span class="level-end"><span class="level-item tag">16</span></span></a><ul><li><a class="level is-mobile" href="/categories/Solidity/Security/"><span class="level-start"><span class="level-item">Security</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Web/"><span class="level-start"><span class="level-item">Web</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Web/Optimization/"><span class="level-start"><span class="level-item">Optimization</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Gyeonghun&#039;s blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 Gyeonghun Park</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/theme.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>